import{_ as s,o as a,c as e,S as n}from"./chunks/framework.1a6f23fa.js";const m=JSON.parse('{"title":"Statamic","description":"","frontmatter":{"head":[["meta",{"name":"description","content":""}]]},"headers":[],"relativePath":"tutorials/cms-and-frameworks/statamic.md","filePath":"tutorials/cms-and-frameworks/statamic.md","lastUpdated":1692430344000}'),t={name:"tutorials/cms-and-frameworks/statamic.md"},l=n(`<div class="info custom-block"><p class="custom-block-title">INFO</p><p>This chapter is work in progress (WIP) ðŸš§, <a href="https://github.com/tyler36/ddev-browsersync#laravel-mix-example" target="_blank" rel="noreferrer">browsersync / asset compilation</a> needs to be implemented for example. Also support for <a href="https://stackoverflow.com/questions/72130137/ddev-laravel-vite-websockets-with-soketi-trouble-with-port-configuration/72405747" target="_blank" rel="noreferrer">vite</a> would be awesome. Happy to hear <a href="https://github.com/mandrasch/my-ddev-lab/issues" target="_blank" rel="noreferrer">your feedback / ideas</a>!</p></div><h1 id="statamic" tabindex="-1">Statamic <a class="header-anchor" href="#statamic" aria-label="Permalink to &quot;Statamic&quot;">â€‹</a></h1><p>I published a series (work in progress) on dev.to as well: <a href="https://dev.to/mandrasch/series/18729" target="_blank" rel="noreferrer">My Statamic deployment journey</a>.</p><h2 id="example-repositories" tabindex="-1">Example repositories <a class="header-anchor" href="#example-repositories" aria-label="Permalink to &quot;Example repositories&quot;">â€‹</a></h2><ul><li><a href="https://github.com/mandrasch/ddev-statamic-blank" target="_blank" rel="noreferrer">https://github.com/mandrasch/ddev-statamic-blank</a> (<a href="https://gitpod.io/#https://github.com/mandrasch/ddev-statamic-blank/" target="_blank" rel="noreferrer">ðŸš€Â  Open in Gitpod</a>)</li><li>Peak Starter Kit (WIP)</li></ul><h2 id="quickstart" tabindex="-1">Quickstart <a class="header-anchor" href="#quickstart" aria-label="Permalink to &quot;Quickstart&quot;">â€‹</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-new-statamic</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-new-statamic/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Create configuration for DDEV project</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--project-type=laravel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--docroot=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--create-docroot</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Install latest statamic via DDEV + composer</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># (https://ddev.readthedocs.io/en/stable/users/developer-tools/#ddev-and-composer)</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">composer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">statamic/statamic</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Generate config, set APP_URL &amp; generate key</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cp .env.example .env</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sed -i &quot;/APP_URL=/c APP_URL=$DDEV_PRIMARY_URL&quot; .env</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">artisan</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key:generate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Add support for CLI please command via simple DDEV-addon:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># (https://github.com/mandrasch/ddev-addon-statamic-please)</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mandrasch/ddev-addon-statamic-please</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Compile JS/SCSS</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">launch</span></span></code></pre></div><p>Afterwards you can create your admin user:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make:user</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">launch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/cp</span></span></code></pre></div><h2 id="install-a-starter-kit-peak" tabindex="-1">Install a starter kit (Peak) <a class="header-anchor" href="#install-a-starter-kit-peak" aria-label="Permalink to &quot;Install a starter kit (Peak)&quot;">â€‹</a></h2><p><a href="https://peak.1902.studio/" target="_blank" rel="noreferrer">https://peak.1902.studio/</a></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-new-statamic</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my-new-statamic/</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--project-type=laravel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--docroot=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--create-docroot</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">composer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">statamic/statamic</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Add support for CLI please command:</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mandrasch/ddev-addon-statamic-please</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Install starter kit</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starter-kit:install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">studio1902/statamic-peak</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Generate config, set APP_URL &amp; generate key</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cp .env.example .env</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">artisan</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key:generate</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sed -i &quot;/APP_URL=/c APP_URL=$DDEV_PRIMARY_URL&quot; .env</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">launch</span></span></code></pre></div><p>Afterwards you can create your admin user:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">please</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make:user</span></span>
<span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">launch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/cp</span></span></code></pre></div><p>General source: <a href="https://peak.1902.studio/getting-started/installation.html#installation-via-the-cli" target="_blank" rel="noreferrer">https://peak.1902.studio/getting-started/installation.html#installation-via-the-cli</a></p><p><strong>TODO:</strong></p><h3 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">â€‹</a></h3><p>If the starter kit install fails with <code>Composer could not authenticate with GitHub!</code>, <a href="https://github.com/settings/tokens/new" target="_blank" rel="noreferrer">generate a token with no permissions</a> on GitHub and store it to DDEV:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ddev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">composer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--auth</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">github-oauth.github.com</span><span style="color:#A6ACCD;"> [your-token-here]</span></span></code></pre></div><h2 id="pull-content-media-files-from-production" tabindex="-1">Pull content / media files from production <a class="header-anchor" href="#pull-content-media-files-from-production" aria-label="Permalink to &quot;Pull content / media files from production&quot;">â€‹</a></h2><div class="info custom-block"><p class="custom-block-title">INFO</p><p>This chapter is work in progress (WIP) ðŸš§</p></div><p>DDEV offers an incredible feature called <a href="https://ddev.readthedocs.io/en/stable/users/providers/provider-introduction/" target="_blank" rel="noreferrer">Hosting Provider Integration</a>. This enables writing little scripts which can pull files from remote servers to your local development project.</p><p>Disclaimer: Statamic offers <a href="https://statamic.dev/git-automation" target="_blank" rel="noreferrer">Git automation</a>. This approach is not used here, since I want to separate config (git) from site content (on live server).</p><p>First add these lines to your <code>.gitignore</code> file. We will pull the site specific content from the production / live site and don&#39;t store it in git.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Don&#39;t store site specific content, we&#39;ll pull it from live site</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># (Comment these lines if you wan&#39;t to use Git automation)</span></span>
<span class="line"><span style="color:#FFCB6B;">/content</span></span>
<span class="line"><span style="color:#FFCB6B;">/users</span></span>
<span class="line"><span style="color:#FFCB6B;">/public/assets</span></span>
<span class="line"><span style="color:#FFCB6B;">/storage/forms/</span></span></code></pre></div><p>TODO: Add example for pull of these directories to local DDEV / use extension/.zip to implement this as well?</p><h2 id="todos" tabindex="-1">TODOs <a class="header-anchor" href="#todos" aria-label="Permalink to &quot;TODOs&quot;">â€‹</a></h2><ul><li>[ ] Add support for <a href="https://github.com/tyler36/ddev-browsersync#laravel-mix-example" target="_blank" rel="noreferrer">browsersync / asset compilation</a> via LaravelMix. (<a href="https://discord.com/channels/664580571770388500/912420662847619162/992748945107341372" target="_blank" rel="noreferrer">https://discord.com/channels/664580571770388500/912420662847619162/992748945107341372</a>)</li><li>[ ] Add support for Vite as soon as it is implemented officially <a href="https://stackoverflow.com/questions/72130137/ddev-laravel-vite-websockets-with-soketi-trouble-with-port-configuration/72405747" target="_blank" rel="noreferrer">https://stackoverflow.com/questions/72130137/ddev-laravel-vite-websockets-with-soketi-trouble-with-port-configuration/72405747</a></li><li>[ ] Implement DDEV pull script as addon(?)</li></ul><h1 id="bonus-info" tabindex="-1">Bonus info <a class="header-anchor" href="#bonus-info" aria-label="Permalink to &quot;Bonus info&quot;">â€‹</a></h1><ul><li>If you need database support, just add DDEVs database connection settings to <code>.env</code> via <code>ddev exec &quot;cat .env.example | sed -E &#39;s/DB_(HOST|DATABASE|USERNAME|PASSWORD)=(.*)/DB_\\1=db/g&#39; &gt; .env&quot;</code> (TODO: Use another command, this will overwrite the whole <code>.env</code> file)</li><li><a href="https://ddev.com/ddev-local/getting-started-with-ddev-and-composer/" target="_blank" rel="noreferrer">https://ddev.com/ddev-local/getting-started-with-ddev-and-composer/</a></li></ul>`,30),o=[l];function p(r,c,i,d,C,y){return a(),e("div",null,o)}const D=s(t,[["render",p]]);export{m as __pageData,D as default};
