import{_ as e,c as t,o as a,a as s}from"./app.b04d529e.js";const m=JSON.parse('{"title":"Vite","description":"","frontmatter":{"head":[["meta",{"name":"description","content":""}]]},"headers":[{"level":2,"title":"Expose all the ports!!1","slug":"expose-all-the-ports-1"},{"level":2,"title":"Using vite in frameworks / CMS","slug":"using-vite-in-frameworks-cms"},{"level":3,"title":"Laravel","slug":"laravel"},{"level":3,"title":"CraftCMS","slug":"craftcms"},{"level":3,"title":"TYPO3","slug":"typo3"},{"level":3,"title":"WordPress","slug":"wordpress"},{"level":2,"title":"Technical background","slug":"technical-background"},{"level":2,"title":"Add-On: ddev-viteserve","slug":"add-on-ddev-viteserve"},{"level":2,"title":"Connect with the community \u{1F917}","slug":"connect-with-the-community-\u{1F917}"}],"relativePath":"tutorials/nodejs-tools/vite.md","lastUpdated":1681480864000}'),r={name:"tutorials/nodejs-tools/vite.md"},n=s(`<h1 id="vite" tabindex="-1">Vite <a class="header-anchor" href="#vite" aria-hidden="true">#</a></h1><h2 id="expose-all-the-ports-1" tabindex="-1">Expose all the ports!!1 <a class="header-anchor" href="#expose-all-the-ports-1" aria-hidden="true">#</a></h2><p>The most important thing for vite is to expose the vite port (5173) so that it can be accessed from outside the DDEV docker container (= from your laptop).</p><p>Thanks to DDEV, this is quite simple. Just add the following to the <code>.ddev/config.yaml</code>, the http_port does not really matter.</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># .ddev/config.yaml</span></span>
<span class="line"><span style="color:#F07178;">web_extra_exposed_ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node-vite</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5173</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">http_port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5172</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">https_port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5173</span></span>
<span class="line"></span></code></pre></div><p>\u26A0\uFE0F A <code>ddev restart</code> is needed after that.</p><p>You can check the current status via <code>ddev describe</code>. See DDEV docs for more information on <a href="https://ddev.readthedocs.io/en/stable/users/extend/customization-extendibility/#exposing-extra-ports-via-ddev-router" target="_blank" rel="noopener noreferrer">web_extra_exposed_ports</a>.</p><h2 id="using-vite-in-frameworks-cms" tabindex="-1">Using vite in frameworks / CMS <a class="header-anchor" href="#using-vite-in-frameworks-cms" aria-hidden="true">#</a></h2><p>Vite integration differs by CMS, each CMS has their own approach. Some use a combination of a special NodeJS vite plugin + PHP code (Laravel). Some use vite as it is and use PHP integration for including the vite client scripts accordingly.</p><p>See some examples here:</p><h3 id="laravel" tabindex="-1">Laravel <a class="header-anchor" href="#laravel" aria-hidden="true">#</a></h3><ul><li><a href="https://github.com/mandrasch/ddev-laravel-vite" target="_blank" rel="noopener noreferrer">https://github.com/mandrasch/ddev-laravel-vite</a> (WIP)</li><li><a href="https://github.com/mandrasch/ddev-laravel-breeze-vite/" target="_blank" rel="noopener noreferrer">https://github.com/mandrasch/ddev-laravel-breeze-vite/</a> (Outdated, needs changes)</li></ul><h3 id="craftcms" tabindex="-1">CraftCMS <a class="header-anchor" href="#craftcms" aria-hidden="true">#</a></h3><ul><li>See: <a href="https://nystudio107.com/docs/vite/#using-ddev" target="_blank" rel="noopener noreferrer">https://nystudio107.com/docs/vite/#using-ddev</a></li></ul><h3 id="typo3" tabindex="-1">TYPO3 <a class="header-anchor" href="#typo3" aria-hidden="true">#</a></h3><ul><li><a href="https://github.com/fgeierst/typo3-vite-demo" target="_blank" rel="noopener noreferrer">https://github.com/fgeierst/typo3-vite-demo</a> by Florian Geierstanger</li><li><a href="https://github.com/mandrasch/ddev-typo3-vite-svelte" target="_blank" rel="noopener noreferrer">https://github.com/mandrasch/ddev-typo3-vite-svelte</a> (WIP)</li></ul><h3 id="wordpress" tabindex="-1">WordPress <a class="header-anchor" href="#wordpress" aria-hidden="true">#</a></h3><ul><li>WordPress: <a href="https://github.com/mandrasch/ddev-wp-vite-demo" target="_blank" rel="noopener noreferrer">https://github.com/mandrasch/ddev-wp-vite-demo</a> (OLD)</li><li>NEW: <a href="https://github.com/mandrasch/ddev-typo3-vite-svelte" target="_blank" rel="noopener noreferrer">https://github.com/mandrasch/ddev-typo3-vite-svelte</a></li><li>NEW: <a href="https://github.com/mandrasch/ddev-wp-acf-blocks-svelte" target="_blank" rel="noopener noreferrer">https://github.com/mandrasch/ddev-wp-acf-blocks-svelte</a></li></ul><h2 id="technical-background" tabindex="-1">Technical background <a class="header-anchor" href="#technical-background" aria-hidden="true">#</a></h2><p>The challenge in terms of DDEV is that you should acknowledge that DDEV runs it own reverse proxy and takes care of HTTPS. Vite is just merely waiting in the DDEV container and needs to respond to port 5173 and accept any incoming data traffic. Vite does not(!) need to run https itself.</p><p>DDEV then needs to expose the port 5173 via https to the outside, this is done in <a href="https://github.com/torenware/ddev-viteserve/blob/master/docker-compose.viteserve.yaml" target="_blank" rel="noopener noreferrer">docker-compose.viteserve.yaml</a>.</p><p>An important first check is that vite is accessible via <code>https://your-ddev-project.ddev.site:5173/@vite/client?ver=1.0.0</code> after you run <code>ddev vite-serve start</code>.</p><p>Afterwards your CMS / PHP frameworks needs to be configured accordingly, see above. The official docs for this can be found here: <a href="https://vitejs.dev/guide/backend-integration.html" target="_blank" rel="noopener noreferrer">https://vitejs.dev/guide/backend-integration.html</a></p><h2 id="add-on-ddev-viteserve" tabindex="-1">Add-On: ddev-viteserve <a class="header-anchor" href="#add-on-ddev-viteserve" aria-hidden="true">#</a></h2><p>There is a new plugin for DDEV called <a href="https://github.com/torenware/ddev-viteserve" target="_blank" rel="noopener noreferrer">viteserve</a> by torenware. It runs vite in the background and has support for package managers npm, yarn and pnpm (default).</p><p>You can configure it (after installation) via <code>.ddev/.env</code>, here is an example for having vite config in a subfolder. If you want to use the project root, use <code>VITE_PROJECT_DIR=.</code>.</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># start vite</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_PROJECT_DIR=wp-content/themes/twentytwentytwo-child/</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_PRIMARY_PORT=5173</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_SECONDARY_PORT=5273</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_JS_PACKAGE_MGR=npm</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># end vite</span></span>
<span class="line"></span></code></pre></div><p>See full documentation for DDEV viteserve here: <a href="https://github.com/torenware/ddev-viteserve" target="_blank" rel="noopener noreferrer">https://github.com/torenware/ddev-viteserve</a></p><h2 id="connect-with-the-community-\u{1F917}" tabindex="-1">Connect with the community \u{1F917} <a class="header-anchor" href="#connect-with-the-community-\u{1F917}" aria-hidden="true">#</a></h2><p>There are dedicated CMS channels on <a href="https://discord.gg/hCZFfAMc5k" target="_blank" rel="noopener noreferrer">DDEV discord</a>, e.g. for Laravel, WordPress, typo3, CraftCMS, Drupal, etc.!</p>`,30),o=[n];function i(l,d,c,p,h,v){return a(),t("div",null,o)}var f=e(r,[["render",i]]);export{m as __pageData,f as default};
